@{
    ViewData["Title"] = "Home Page";
}
@model Movie
<!-- This page acts as the form where we can submit more movies into the database 
The required tags don't allow someone to click the submit button until the required fields are filled
The validation is also done in the Movie.cs file -->
<h1>New Movies Form</h1>

<form method="post">
    <input type="hidden" asp-for="MovieId"/>
    
    <select asp-for="CategoryId">
        @foreach (Category c in ViewBag.Categories)
        {
            <option value="@c.CategoryId">@c.CategoryName</option>
        }
    </select>
    <br/>
    <label asp-for="Title">Title</label>
    <input asp-for="Title" required/>
    <br/>
    <label asp-for="Year">Year</label>
    <input asp-for="Year" required/>
    <br/>
    <label asp-for="Director">Director</label>
    <input asp-for="Director" />
    <br/>
    <label asp-for="Rating">Rating</label>
    <select asp-for="Rating" >
        <option value="">Select a rating</option>
        <option value="G">G</option>
        <option value="PG">PG</option>
        <option value="PG-13">PG-13</option>
        <option value="R">R</option>
    </select>
    <br/>
    <label asp-for="Edited">Edited?</label>
    <select asp-for="Edited" required>
        <option value="True">Yes</option>
        <option value="False">No</option>
    </select>
    <br/>
    <label asp-for="LentTo">Lent To</label>
    <input asp-for="LentTo"/>
    <br/>
    <label asp-for="CopiedToPlex" required >Copied to Plex</label>
    <input asp-for="CopiedToPlex"/>
    <br/>
    <label asp-for="Notes">Notes</label>
    <input asp-for="Notes" maxlength="25"/>

    <button type="submit" id="submitBtn" disabled>Submit Application</button>
    
    <!-- this last tag here allows error messages to show when required fields are filled -->
    <div asp-validation-summary="All"></div>
</form>

<!-- this is admitally something chat gave me to help with validation within the form itself. I don't totally know
what it does :) but it has helped so far! -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
$(document).ready(function () {
    function checkFormValidity() {
        let isValid = true;

        $("input[required], select[required]").each(function () {
            if ($(this).val().trim() === "") {
                isValid = false;
            }
        });

        $("#submitBtn").prop("disabled", !isValid);
    }

    $("input[required], select[required]").on("input change", checkFormValidity);
    checkFormValidity(); // Check on page load
});
</script>
